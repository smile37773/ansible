---
- hosts: localhost
  vars_files:
    - vars.yml
  tasks:
    - name: ApiManagementCreateNotification 
      apimanagementnotification:
        resource_group: "{{ resource_group }}"
        service_name: "{{ service_name }}"
        name: RequestPublisherNotificationMessage
        title: Subscription requests (requiring approval) 
    - name: ApiManagementCreateNotificationRecipientEmail
      apimanagementnotificationrecipientemail:                                                                         
        resource_group: "{{ resource_group }}"
        service_name: "{{ service_name }}"
        notification_name: RequestPublisherNotificationMessage
        email: myRecipientEmail
    - name: ApiManagementCreateNotificationRecipientUser
      apimanagementnotificationrecipientuser:
        resource_group: "{{ resource_group }}"
        service_name: "{{ service_name }}"
        notification_name: RequestPublisherNotificationMessage
        user_id: "{{ user_name }}"
